"use strict";var express=require("express"),mongoose=require("mongoose"),bodyParser=require("body-parser"),cors=require("cors"),dotenv=require("dotenv"),path=require("path");dotenv.config();var app=express(),port=process.env.PORT||3e3;app.use(cors()),app.use(bodyParser.json()),mongoose.connect(process.env.MONGODB_URI,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(function(){return console.log("MongoDB Atlas connected")}).catch(function(e){return console.log("Error connecting to MongoDB Atlas:",e)});var Message=mongoose.model("Message",new mongoose.Schema({username:{type:String,required:!0},text:{type:String,required:!0},time:{type:Date,default:Date.now}}));app.post("/save-message",function(r,s){var n,t,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body,t=n.username,o=n.text,e.prev=1,a=new Message({username:t,text:o}),e.next=5,regeneratorRuntime.awrap(a.save());case 5:s.status(200).send({message:"Message saved successfully!"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s.status(500).send({message:"Error saving message",error:e.t0});case 11:case"end":return e.stop()}},null,null,[[1,8]])}),app.get("/get-messages",function(e,r){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Message.find().sort({time:1}));case 3:s=e.sent,r.json(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).send({message:"Error fetching messages",error:e.t0});case 10:case"end":return e.stop()}},null,null,[[0,7]])}),app.listen(port,function(){console.log("Server running on port ".concat(port))});
//# sourceMappingURL=server.min.js.map
